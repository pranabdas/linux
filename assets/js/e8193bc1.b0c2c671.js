"use strict";(self.webpackChunklinux_tutorial=self.webpackChunklinux_tutorial||[]).push([[877],{6607:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var a=s(4848),r=s(8453);const i={title:"Linux administration"},t=void 0,d={id:"administration",title:"Linux administration",description:"User administration",source:"@site/docs/administration.md",sourceDirName:".",slug:"/administration",permalink:"/linux/administration",draft:!1,unlisted:!1,editUrl:"https://github.com/pranabdas/linux/blob/main/docs/administration.md",tags:[],version:"current",frontMatter:{title:"Linux administration"},sidebar:"docs",previous:{title:"Linux setup",permalink:"/linux/setup"},next:{title:"PGP Encryption",permalink:"/linux/pgp"}},c={},o=[{value:"User administration",id:"user-administration",level:2},{value:"Create user",id:"create-user",level:3},{value:"Create group",id:"create-group",level:3},{value:"System info",id:"system-info",level:3},{value:"System monitoring",id:"system-monitoring",level:2},{value:"Resource management",id:"resource-management",level:2},{value:"Networking",id:"networking",level:2},{value:"System update",id:"system-update",level:2}];function l(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"user-administration",children:"User administration"}),"\n",(0,a.jsx)(n.p,{children:"For below examples, I am logged into a RHEL compatible linux distribution."}),"\n",(0,a.jsx)(n.h3,{id:"create-user",children:"Create user"}),"\n",(0,a.jsxs)(n.p,{children:["In order to add new user we need to switch to ",(0,a.jsx)(n.code,{children:"root"})," account. We can do that by:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"su -\n# su stands for switch user\n# in some systems\nsudo su -\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Once we are logged into the system as ",(0,a.jsx)(n.code,{children:"root"}),", we can add new user:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"useradd <username>\nuseradd linuxfan\n"})}),"\n",(0,a.jsx)(n.p,{children:"We can check the info of the newly added user by:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"id <username>\n"})}),"\n",(0,a.jsx)(n.p,{children:"And it will print the following:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"uid=1001(linuxfan) gid=1001(linuxfan) groups=1001(linuxfan)\n"})}),"\n",(0,a.jsx)(n.p,{children:"We see that along with the newly created user, a group with the same name is\nalso created, and the new user is added to that group by default."}),"\n",(0,a.jsxs)(n.p,{children:["We can also look for the user information in the ",(0,a.jsx)(n.code,{children:"/etc/passwd"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cat /etc/passwd | grep linuxfan\n"})}),"\n",(0,a.jsx)(n.p,{children:"That prints out:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"linuxfan:x:1001:1001::/home/linuxfan:/bin/bash\n"})}),"\n",(0,a.jsxs)(n.p,{children:["We can provide additional options to ",(0,a.jsx)(n.code,{children:"useradd"}),". Please see help for more\ndetails."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"[root@host:~]# useradd --help\nUsage: useradd [options] LOGIN\n       useradd -D\n       useradd -D [options]\n\nOptions:\n      --badname                 do not check for bad names\n  -b, --base-dir BASE_DIR       base directory for the home directory of the\n                                new account\n      --btrfs-subvolume-home    use BTRFS subvolume for home directory\n  -c, --comment COMMENT         GECOS field of the new account\n  -d, --home-dir HOME_DIR       home directory of the new account\n  -D, --defaults                print or change default useradd configuration\n  -e, --expiredate EXPIRE_DATE  expiration date of the new account\n  -f, --inactive INACTIVE       password inactivity period of the new account\n  -g, --gid GROUP               name or ID of the primary group of the new\n                                account\n  -G, --groups GROUPS           list of supplementary groups of the new\n                                account\n  -h, --help                    display this help message and exit\n  -k, --skel SKEL_DIR           use this alternative skeleton directory\n  -K, --key KEY=VALUE           override /etc/login.defs defaults\n  -l, --no-log-init             do not add the user to the lastlog and\n                                faillog databases\n  -m, --create-home             create the user's home directory\n  -M, --no-create-home          do not create the user's home directory\n  -N, --no-user-group           do not create a group with the same name as\n                                the user\n  -o, --non-unique              allow to create users with duplicate\n                                (non-unique) UID\n  -p, --password PASSWORD       encrypted password of the new account\n  -r, --system                  create a system account\n  -R, --root CHROOT_DIR         directory to chroot into\n  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files\n  -s, --shell SHELL             login shell of the new account\n  -u, --uid UID                 user ID of the new account\n  -U, --user-group              create a group with the same name as the user\n  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping\n"})}),"\n",(0,a.jsx)(n.p,{children:"Assign password for a user:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"passwd <username>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Encrypted password info is saved in ",(0,a.jsx)(n.code,{children:"/etc/shadow"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cat /etc/shadow | grep linuxfan\n\nlinuxfan:$6$YwIUOQqwKk6HwgU9$M.KOwYx9D.21U3kNREw79ToghJXx2tzVIGnjwr/lzR8YDveAeEF9U56fAU6mhVDM1W.Zt6TMzvgh.2z5OkOrU.:19845:0:99999:7:::\n"})}),"\n",(0,a.jsx)(n.p,{children:"Change username:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"usermod -l <new-username> <current-username>\nusermod -l codingfan linuxfan\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Now if we look for information of ",(0,a.jsx)(n.code,{children:"codingfan"})," in ",(0,a.jsx)(n.code,{children:"/ect/passwd"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"[root@host:~]# cat /etc/passwd | grep codingfan\ncodingfan:x:1001:1001::/home/linuxfan:/bin/bash\n"})}),"\n",(0,a.jsx)(n.p,{children:"Notice that the home directory name is still the previous one."}),"\n",(0,a.jsx)(n.p,{children:"Delete a user:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"userdel <username>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Lock a user:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"usermod -L <username>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Unlock a user:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"usermod -U <username>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"create-group",children:"Create group"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"groupadd projectX\n"})}),"\n",(0,a.jsx)(n.p,{children:"We can see group list in"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"[root@host:~]# cat /etc/group\n[snipped]\nlinuxfan:x:1001:\nprojectX:x:1002:\n"})}),"\n",(0,a.jsx)(n.p,{children:"Add a user to a new group."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"usermod -G projectX linuxfan\n\n[root@host:~]# cat /etc/group | grep projectX\nprojectX:x:1002:linuxfan\n\n[root@host:~]# id linuxfan\nuid=1001(linuxfan) gid=1001(linuxfan) groups=1001(linuxfan),1002(projectX)\n"})}),"\n",(0,a.jsx)(n.p,{children:"Delete a group:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"groupdel <groupname>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"system-info",children:"System info"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"uname -a\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"arch\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"hostname\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"dmidecode\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cat /etc/os-release\n"})}),"\n",(0,a.jsx)(n.h2,{id:"system-monitoring",children:"System monitoring"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"who\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"w\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"last\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"tail -f /var/log/secure\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl list-units --type=service\n\nsystemctl status sshd\nsystemctl stop sshd\nsystemctl start sshd\n"})}),"\n",(0,a.jsx)(n.h2,{id:"resource-management",children:"Resource management"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"top\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Exit ",(0,a.jsx)(n.code,{children:"top"})," screen by pressing ",(0,a.jsx)(n.code,{children:"q"})," key in the keyboard."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"free\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"df\ndf -h\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"du /path\ndu -hs /path\ndu -h /path | sort -nr\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"uptime\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"dmesg\ndmesg | more\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ps\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cat /var/log/messages\n"})}),"\n",(0,a.jsx)(n.h2,{id:"networking",children:"Networking"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ping google.com\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ifconfig\n\n# newer replacement\nip\nip addr show\nip route show\nip link set eth0 up\n"})}),"\n",(0,a.jsx)(n.h2,{id:"system-update",children:"System update"}),"\n",(0,a.jsx)(n.p,{children:"Update the full system:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yum update\n\n# newer dnf is replacing yum\ndnf update\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"dnf list installed\ndnf list installed | wc -l\n\ndnf repoinfo\n\ndnf search openssh\ndnf install openssh\n\ndnf list installed | grep openssl\nrpm -qa | grep openssl\nrpm -ql openssl\n\ndnf remove openssh\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var a=s(6540);const r={},i=a.createContext(r);function t(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);