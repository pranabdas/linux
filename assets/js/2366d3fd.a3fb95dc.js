"use strict";(self.webpackChunklinux_tutorial=self.webpackChunklinux_tutorial||[]).push([["628"],{3320:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>r,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>t,contentTitle:()=>c});var s=JSON.parse('{"id":"firewall","title":"Firewall","description":"We will setup firewalld. Make sure that another firewall tool is not running","source":"@site/docs/firewall.md","sourceDirName":".","slug":"/firewall","permalink":"/linux/firewall","draft":false,"unlisted":false,"editUrl":"https://github.com/pranabdas/linux/blob/main/docs/firewall.md","tags":[],"version":"current","frontMatter":{"title":"Firewall"},"sidebar":"docs","previous":{"title":"Network setup","permalink":"/linux/network-setup"},"next":{"title":"Network security","permalink":"/linux/network-security"}}'),a=l(4848),i=l(4429);let r={title:"Firewall"},c,t={},d=[];function o(e){let n={code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["We will setup ",(0,a.jsx)(n.strong,{children:"firewalld"}),". Make sure that another firewall tool is not running\nor installed in the system that might conflict with ",(0,a.jsx)(n.strong,{children:"firewalld"}),". In some older\nsystems, you might have ",(0,a.jsx)(n.strong,{children:"iptables"})," installed. You can check if the service is\nrunning:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl status iptables\n"})}),"\n",(0,a.jsx)(n.p,{children:"If it is there, stop the service in case it is running:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl stop iptables\n"})}),"\n",(0,a.jsx)(n.p,{children:"If it is not running, next check if the program is installed:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd /sbin/\nls -Fla iptables\n"})}),"\n",(0,a.jsx)(n.p,{children:"Mask the program:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl mask iptables\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Install ",(0,a.jsx)(n.em,{children:"firewalld"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt install firewalld\nsudo apt install firewall-config\n"})}),"\n",(0,a.jsx)(n.p,{children:"Check the available zones:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --get-zones\n"})}),"\n",(0,a.jsx)(n.p,{children:"Get default zone:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --get-default-zone\n"})}),"\n",(0,a.jsx)(n.p,{children:"More detailed list:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --list-all-zones\n"})}),"\n",(0,a.jsx)(n.p,{children:"Services available via firewalld:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --get-services\n"})}),"\n",(0,a.jsx)(n.p,{children:"Change default zone:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --set-default-zone=work\n"})}),"\n",(0,a.jsx)(n.p,{children:"Get active zones:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --get-active-zones\n"})}),"\n",(0,a.jsx)(n.p,{children:"Add a service to your default zone:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --add-service=mdns\n"})}),"\n",(0,a.jsx)(n.p,{children:"List the zone:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --list-all\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Allow ",(0,a.jsx)(n.em,{children:"http"})," and ",(0,a.jsx)(n.em,{children:"https"})," in a apache server:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --add-service=http\nfirewall-cmd --add-service=https\n"})}),"\n",(0,a.jsx)(n.p,{children:"Allow mail server:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --add-service=smtp\nfirewall-cmd --add-service=smtps\nfirewall-cmd --add-service=smtp-submission\nfirewall-cmd --add-service=imap\nfirewall-cmd --add-service=imaps\nfirewall-cmd --add-service=pop3\nfirewall-cmd --add-service=pop3s\n"})}),"\n",(0,a.jsx)(n.p,{children:"Removing services:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --remove-service=smtp\nfirewall-cmd --remove-service=imap\nfirewall-cmd --remove-service=pop3\n"})}),"\n",(0,a.jsx)(n.p,{children:"Emergency panic mode (stop all network connections):"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --panic-on\nfirewall-cmd --query-panic\nfirewall-cmd --panic-off\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},4429:function(e,n,l){l.d(n,{R:()=>r,x:()=>c});var s=l(6540);let a={},i=s.createContext(a);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);