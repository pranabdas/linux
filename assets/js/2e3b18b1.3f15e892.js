"use strict";(self.webpackChunklinux_tutorial=self.webpackChunklinux_tutorial||[]).push([[913],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return y}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},p=Object.keys(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,p=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=s(n),g=r,y=c["".concat(i,".").concat(g)]||c[g]||m[g]||p;return n?a.createElement(y,l(l({ref:t},u),{},{components:n})):a.createElement(y,l({ref:t},u))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=n.length,l=new Array(p);l[0]=g;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var s=2;s<p;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},2867:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return i},default:function(){return g},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var a=n(7462),r=n(3366),p=(n(7294),n(3905)),l=["components"],o={title:"PGP Encryption"},i=void 0,s={unversionedId:"pgp",id:"pgp",title:"PGP Encryption",description:"First step, check whether you have gnupg already installed in your system. If",source:"@site/docs/pgp.md",sourceDirName:".",slug:"/pgp",permalink:"/linux/pgp",draft:!1,editUrl:"https://github.com/pranabdas/linux/blob/main/docs/pgp.md",tags:[],version:"current",frontMatter:{title:"PGP Encryption"},sidebar:"docs",previous:{title:"Misc",permalink:"/linux/category/misc"},next:{title:"gnuplot",permalink:"/linux/gnuplot"}},u={},c=[{value:"Using PGP encryption with VIM editor",id:"using-pgp-encryption-with-vim-editor",level:2},{value:"Resources",id:"resources",level:2}],m={toc:c};function g(e){var t=e.components,n=(0,r.Z)(e,l);return(0,p.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"First step, check whether you have ",(0,p.kt)("em",{parentName:"p"},"gnupg")," already installed in your system. If\nyou are on a standard Linux environment, that's likely the case."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --version\n")),(0,p.kt)("p",null,"If it prints version info, we are good to go. Otherwise, you will see some error\nmessage. In that case, we need to install. Depending on your OS and package\nmanager choose one of the following or similar command:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"# ubuntu / debian\napt install gnupg\n\n# fedora\ndnf install gnupg\n\n# macOS\nbrew install gnupg\n")),(0,p.kt)("p",null,"Create a new key pair:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --gen-key\n")),(0,p.kt)("p",null,"You must keep the private key to yourself and never share with anyone. The\npublic key you can give to people, so that they can encrypt messages/files with\nyour public key. You will be the only one to decrypt those messages using your\nprivate key. Private key is stored on the disc encrypted with a passphrase. If\nyou lose either your private key or the passphrase, you will not be able to\ndecrypt the messages. Therefore, backup your private key securely, also write\ndown the passphrase in a safe place."),(0,p.kt)("p",null,"Export your public key:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --export --armor youremail@example.com > mypubkey.asc\n")),(0,p.kt)("p",null,"Import others public keys:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --import pubkey.asc\n")),(0,p.kt)("p",null,"You can use the same command to import your own private keys as well like if you\nneed to move your key to another machine or you have obtained from another\nplace."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --import privatekey.asc\n")),(0,p.kt)("p",null,"List public keys in your keyring:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --list-keys\n")),(0,p.kt)("p",null,"List private keys:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --list-secret-keys\n")),(0,p.kt)("p",null,"Encrypt a file:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --encrypt --recipient Pranab filename.txt\ngpg --encrypt --recipient 'Pranab' filename.txt\ngpg --encrypt --recipient 'pranab@example.com' --recipient 'Sam' filename.txt\n")),(0,p.kt)("p",null,"It will generate encrypted file named ",(0,p.kt)("em",{parentName:"p"},"filename.txt.gpg"),".\nIf you want armor text, use that flag:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --encrypt --armor --recipient 'pranab@example.com' filename.txt\n")),(0,p.kt)("p",null,"It generates encrypted file named ",(0,p.kt)("em",{parentName:"p"},"filename.txt.asc"),". Specify the output file:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --output filename.asc --encrypt --armor --recipient 'pranab@example.com' filename.txt\n")),(0,p.kt)("p",null,"Decrypt a file:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --decrypt filename.txt.gpg\ngpg filename.txt.gpg\ngpg --decrypt filename.txt.gpg > filename-copy.txt\n")),(0,p.kt)("p",null,"If you do not provide an output file name, it will print decrypted text in the\nterminal. If it is a binary file, you should provide an output file, possibly\nwith correct file extension."),(0,p.kt)("p",null,"Edit a key:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --edit-key 'Pranab Das'\ntrust\nquit\n")),(0,p.kt)("p",null,"Set the time a cache entry is valid to n seconds. The default is 600 seconds."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg --default-cache-ttl n\n")),(0,p.kt)("p",null,"You can download anyone's protonmail public key by visiting the URL:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"https://api.protonmail.ch/pks/lookup?op=get&search={username}@protonmail.com\n")),(0,p.kt)("p",null,"You can use PGP to perform symmetric encryption as well. Encrypt a file using\npassphrase:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg -c file.txt\n# with more options\ngpg --symmetric \\\n    --armor \\\n    --cipher-algo AES256 \\\n    --output file.enc \\\n    file.txt\n")),(0,p.kt)("p",null,"By default gpg uses some compression leading to output size less than that of\ninput for non armor outputs. You can change the compression algorithm and\ncompression level by ",(0,p.kt)("inlineCode",{parentName:"p"},"--compress-algo")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"-z")," options, respectively. See the\nmanual for more details."),(0,p.kt)("p",null,"Decryption:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"gpg -d file.txt.gpg > file-copy.txt\n")),(0,p.kt)("h2",{id:"using-pgp-encryption-with-vim-editor"},"Using PGP encryption with VIM editor"),(0,p.kt)("p",null,"Install this plugin ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/jamessan/vim-gnupg"},"https://github.com/jamessan/vim-gnupg")),(0,p.kt)("p",null,"I experienced a bug: sometimes two characters of second line is missing or\nhidden. To resolve this issue, add this to your ",(0,p.kt)("inlineCode",{parentName:"p"},".vimrc")," file:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-vim"},"autocmd User GnuPG call timer_start(1, 'FixRedraw', {})\nfunc FixRedraw(timer)\n        redraw!\nendfunc\n")),(0,p.kt)("p",null,"You may prefer to have following options. Just add to your ",(0,p.kt)("inlineCode",{parentName:"p"},".vimrc"),":"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-vim"},'let g:GPGPreferArmor=1\nlet g:GPGDefaultRecipients=["default@example.com"]\n')),(0,p.kt)("h2",{id:"resources"},"Resources"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"https://protonmail.com/blog/what-is-pgp-encryption/"},"https://protonmail.com/blog/what-is-pgp-encryption/")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"https://www.gnupg.org/gph/en/manual.html"},"https://www.gnupg.org/gph/en/manual.html")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"https://emailselfdefense.fsf.org/"},"https://emailselfdefense.fsf.org/")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"https://blog.ghostinthemachines.com/2015/03/01/how-to-use-gpg-command-line/"},"https://blog.ghostinthemachines.com/2015/03/01/how-to-use-gpg-command-line/"))))}g.isMDXComponent=!0}}]);